---
interface Props {
  intent: string;
  steps: string[];
  chunks_retrieved: number;
}

const { intent, steps, chunks_retrieved } = Astro.props;
---

<details class="agent-trace">
  <summary class="trace-summary">
    <span class="trace-icon">ðŸ¤–</span>
    <span class="trace-title">Proceso de pensamiento</span>
    <span class="trace-badge">{intent}</span>
  </summary>
  
  <div class="trace-content">
    <div class="trace-stat">
      <span class="label">Chunks recuperados:</span>
      <span class="value">{chunks_retrieved}</span>
    </div>
    
    <div class="trace-steps">
      <span class="label">Pasos ejecutados:</span>
      <ul>
        {steps.map((step) => (
          <li>{step}</li>
        ))}
      </ul>
    </div>
  </div>
</details>

<style>
  .agent-trace {
    margin-top: var(--spacing-sm);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-secondary);
    font-size: 0.8rem;
  }

  .trace-summary {
    padding: var(--spacing-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    user-select: none;
    color: var(--text-secondary);
  }

  .trace-summary:hover {
    color: var(--text-primary);
  }

  .trace-title {
    flex-grow: 1;
    font-weight: 500;
  }

  .trace-badge {
    background: var(--border-color);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.7rem;
    text-transform: uppercase;
  }

  .trace-content {
    padding: 0 var(--spacing-sm) var(--spacing-sm) var(--spacing-sm);
    border-top: 1px solid var(--border-color);
    color: var(--text-secondary);
  }

  .trace-stat {
    margin-top: var(--spacing-sm);
    display: flex;
    justify-content: space-between;
  }

  .trace-steps {
    margin-top: var(--spacing-sm);
  }

  .label {
    font-weight: 600;
    display: block;
    margin-bottom: 2px;
  }

  ul {
    list-style-type: none;
    padding-left: var(--spacing-sm);
    border-left: 2px solid var(--border-color);
  }

  li {
    margin-bottom: 2px;
  }
</style>
